<template>
  
</template>

<script>
import EventBus from '@/src/utils/event-bus.js';
import types from '@/src/utils/types.js';
import findType from '@/src/utils/find-type.js';

export default {
  props: {
    actions: {
      type: Array,
      default: () => []
    }
  },
  methods: {
    getActionIcon(type, color) {
      const icons = {
        //переслать
        forward: `<svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.30762 3.05847V0.782736C6.30762 0.515464 6.63076 0.381614 6.81975 0.570604L12.0788 5.8297C12.2052 5.95605 12.2052 6.1609 12.0788 6.28724L6.81975 11.5463C6.63076 11.7353 6.30762 11.6015 6.30762 11.3342V9.05847H0.631146C0.452466 9.05847 0.307617 8.91362 0.307617 8.73494V3.382C0.307617 3.20332 0.452466 3.05847 0.631147 3.05847H6.30762Z" fill="#779733"/>
                  </svg>`,
        //прочитать
        consider: `<svg width="15" height="10" viewBox="0 0 15 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9438 5C14.9438 5.86451 14.0167 5.50512 12.5953 4.95414C11.8759 4.67529 11.03 4.34736 10.1135 4.10419C10.2219 4.4209 10.2811 4.76264 10.2811 5.11901C10.2811 6.76272 9.02344 8.0952 7.47207 8.0952C5.92071 8.0952 4.66309 6.76272 4.66309 5.11901C4.66309 4.79482 4.71201 4.48273 4.80246 4.19059C4.00239 4.41424 3.25052 4.68899 2.58984 4.93043C1.046 5.4946 0 5.87685 0 5C0 3.32342 3.8241 0 7.64045 0C11.4568 0 14.9438 3.32342 14.9438 5ZM8.30693 5.11907C8.30693 5.60774 7.93304 6.00388 7.47182 6.00388C7.01061 6.00388 6.63672 5.60774 6.63672 5.11907C6.63672 4.6304 7.01061 4.23425 7.47182 4.23425C7.93304 4.23425 8.30693 4.6304 8.30693 5.11907Z" fill="#838383"/>
                    <path d="M15.0005 5.71429C14.447 5.71429 13.8494 6.16536 13.102 6.72956C11.8541 7.67144 10.1887 8.92857 7.61378 8.92857C5.33055 8.85878 3.57388 7.6825 2.21553 6.77294C1.34282 6.18856 0.634523 5.71429 0.0566406 5.71429C0.90895 7.04225 3.14653 10 7.61378 10C11.5173 10 14.3186 7.2837 15.0005 5.71429Z" fill="#838383"/>
                  </svg>`,
        //отметить непрочитанным
        // unconsider: `<svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        //               <path d="M2.12115 0.707079C1.73065 0.316553 1.09747 0.316553 0.70697 0.707079C0.316437 1.0976 0.316437 1.73077 0.70697 2.12129L2.42847 3.84281C0.973572 4.88882 0 6.15403 0 6.99997C0 7.87682 1.04599 7.49458 2.58984 6.9304C3.24487 6.69106 3.98969 6.41886 4.78198 6.1963L4.79633 6.21064C4.70981 6.49699 4.66309 6.80221 4.66309 7.11898C4.66309 8.76269 5.92072 10.0952 7.47208 10.0952C7.82825 10.0952 8.16895 10.0249 8.48248 9.89682L9.31845 10.7328C8.79816 10.856 8.23218 10.9285 7.61377 10.9285C5.33057 10.8588 3.57388 9.68247 2.21555 8.77291C1.3428 8.18854 0.634521 7.71426 0.0566406 7.71426C0.908936 9.04222 3.14651 12 7.61377 12C8.5358 12 9.3963 11.8484 10.1819 11.5963L12.0207 13.435C12.4112 13.8255 13.0443 13.8255 13.4349 13.435C13.8254 13.0445 13.8254 12.4113 13.4349 12.0208L2.12115 0.707079Z" fill="#838383"/>
        //               <path d="M11.9627 9.54859L12.717 10.3029C13.8808 9.45608 14.6779 8.4568 15.0005 7.71426C14.447 7.71426 13.8494 8.16534 13.102 8.72953C12.7575 8.98955 12.3812 9.2736 11.9627 9.54859Z" fill="#838383"/>
        //               <path d="M4.92624 2.51214L10.2084 7.79434C10.256 7.57736 10.2811 7.35128 10.2811 7.11898C10.2811 6.76261 10.222 6.42087 10.1135 6.10417C11.03 6.34733 11.8759 6.67526 12.5953 6.95412C14.0167 7.50508 14.9438 7.86448 14.9438 6.99997C14.9438 5.32339 11.4568 1.99997 7.64044 1.99997C6.71814 1.99997 5.79538 2.19408 4.92624 2.51214Z" fill="#838383"/>
        //             </svg>`,
        //пометить далее как непрочитанное
        unread: `<svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M2.12115 0.707079C1.73065 0.316553 1.09747 0.316553 0.70697 0.707079C0.316437 1.0976 0.316437 1.73077 0.70697 2.12129L2.42847 3.84281C0.973572 4.88882 0 6.15403 0 6.99997C0 7.87682 1.04599 7.49458 2.58984 6.9304C3.24487 6.69106 3.98969 6.41886 4.78198 6.1963L4.79633 6.21064C4.70981 6.49699 4.66309 6.80221 4.66309 7.11898C4.66309 8.76269 5.92072 10.0952 7.47208 10.0952C7.82825 10.0952 8.16895 10.0249 8.48248 9.89682L9.31845 10.7328C8.79816 10.856 8.23218 10.9285 7.61377 10.9285C5.33057 10.8588 3.57388 9.68247 2.21555 8.77291C1.3428 8.18854 0.634521 7.71426 0.0566406 7.71426C0.908936 9.04222 3.14651 12 7.61377 12C8.5358 12 9.3963 11.8484 10.1819 11.5963L12.0207 13.435C12.4112 13.8255 13.0443 13.8255 13.4349 13.435C13.8254 13.0445 13.8254 12.4113 13.4349 12.0208L2.12115 0.707079Z" fill="#838383"/>
                      <path d="M11.9627 9.54859L12.717 10.3029C13.8808 9.45608 14.6779 8.4568 15.0005 7.71426C14.447 7.71426 13.8494 8.16534 13.102 8.72953C12.7575 8.98955 12.3812 9.2736 11.9627 9.54859Z" fill="#838383"/>
                      <path d="M4.92624 2.51214L10.2084 7.79434C10.256 7.57736 10.2811 7.35128 10.2811 7.11898C10.2811 6.76261 10.222 6.42087 10.1135 6.10417C11.03 6.34733 11.8759 6.67526 12.5953 6.95412C14.0167 7.50508 14.9438 7.86448 14.9438 6.99997C14.9438 5.32339 11.4568 1.99997 7.64044 1.99997C6.71814 1.99997 5.79538 2.19408 4.92624 2.51214Z" fill="#838383"/>
                    </svg>`,
        //открыть
        open: `<svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.1256 10.7312H1.79828V1.39484H6.46191V0.0584717H1.79828C1.44385 0.0584717 1.10394 0.199267 0.853326 0.449884C0.602709 0.7005 0.461914 1.04041 0.461914 1.39484L0.461914 10.7312C0.464314 11.084 0.606168 11.4216 0.856526 11.6703C1.10688 11.9189 1.44542 12.0585 1.79828 12.0585H11.1256C11.4784 12.0585 11.8169 11.9189 12.0673 11.6703C12.3177 11.4216 12.4595 11.084 12.4619 10.7312V6.05847H11.1256V10.7312ZM7.79828 0.0584717V1.39484H10.1983L3.66191 7.92211L4.57101 8.8312L11.0983 2.29484V4.7312H12.4619V0.0584717H7.79828Z" fill="#779733"/>
              </svg>`,
        //печать
        print: `<svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.40074 1.68565V4.17893H9.88914V1.68565H3.40074ZM2.31934 1.34925V4.17893H0.899295C0.487844 4.17893 0.154297 4.51248 0.154297 4.92393V9.92234C0.154297 10.3338 0.487844 10.6673 0.899295 10.6673H2.31937V14.6084C2.31937 15.0199 2.65292 15.3534 3.06437 15.3534H10.2256C10.637 15.3534 10.9706 15.0199 10.9706 14.6084V10.6673H12.3861C12.7976 10.6673 13.1311 10.3338 13.1311 9.92234V4.92393C13.1311 4.51248 12.7976 4.17893 12.3861 4.17893H10.9705V1.34925C10.9705 0.937795 10.637 0.604248 10.2255 0.604248H3.06433C2.65288 0.604248 2.31934 0.937795 2.31934 1.34925ZM3.40077 10.6673H9.88918V14.272H3.40077V10.6673ZM9.34281 6.07134C9.34281 5.62341 9.70593 5.26029 10.1539 5.26029C10.6018 5.26029 10.9649 5.62341 10.9649 6.07134C10.9649 6.51927 10.6018 6.88238 10.1539 6.88238C9.70593 6.88238 9.34281 6.51927 9.34281 6.07134ZM9.88927 10.1265H3.40086V10.6672H9.88927V10.1265Z" fill="#919191"/>
                </svg>`,
        //скачать
        download: `<svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.5503 6.63249C8.68599 6.63249 8.80922 6.72456 8.86529 6.86914C8.92137 7.01371 8.9006 7.18332 8.8106 7.30205L6.38756 10.5328C6.32179 10.62 6.22695 10.6709 6.12726 10.6709C6.02757 10.6709 5.93272 10.6208 5.86695 10.5328L3.44391 7.30205C3.3546 7.18251 3.33245 7.01371 3.38922 6.86914C3.44529 6.72537 3.56852 6.63249 3.70421 6.63249H5.08881V1.3826C5.08881 1.15968 5.24388 0.97876 5.43496 0.97876H6.81955C7.01063 0.97876 7.1657 1.15968 7.1657 1.3826V6.63249H8.5503ZM10.9309 11.7786V9.74799H12.1306V12.3326C12.1306 12.6899 11.773 12.9787 11.3306 12.9787H0.930842C0.489252 12.9787 0.130859 12.6899 0.130859 12.3326V9.74799H1.33086V11.7786H10.9309Z" fill="#919191"/>
                  </svg>`,
        //отправить письмом
        email: `<svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.5926 0.47876H1.56125C0.700383 0.47876 0 1.08467 0 1.82941V8.12811C0 8.87285 0.700383 9.47876 1.56125 9.47876H11.5926C12.4535 9.47876 13.1538 8.87285 13.1538 8.12811V1.82941C13.1538 1.08467 12.4535 0.47876 11.5926 0.47876ZM11.5926 8.28636H1.56125C1.43471 8.28636 1.32373 8.21243 1.32373 8.12811V2.66231L5.86065 6.11282C5.95367 6.18358 6.07195 6.22253 6.19374 6.22253L6.95997 6.22256C7.08169 6.22256 7.20004 6.18358 7.29309 6.11282L11.8302 2.66219V8.12817C11.8302 8.21243 11.7191 8.28636 11.5926 8.28636ZM6.57694 5.03856L2.16421 1.67116H10.9897L6.57694 5.03856Z" fill="#919191"/>
                </svg>`,
        //ответить
        reply: `<svg style="width: 12px; height: 12px" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"> 
                  <path d="M0.191487 5.51878C0.0824509 5.39705 0.0824509 5.21278 0.191487 5.09105L4.13986 0.682919C4.33612 0.46381 4.69918 0.602635 4.69918 0.896786V3.18859H5.69829C8.79627 3.18859 11.3076 5.7455 11.3076 8.89969V9.89357C11.3076 10.1269 11.0196 10.2371 10.8638 10.0633C9.35505 8.38023 7.22019 7.42123 4.98198 7.42123H4.69918V9.71304C4.69918 10.0072 4.33612 10.146 4.13986 9.92691L0.191487 5.51878Z" fill="#779733"/>
                </svg>`,
        //цитировать
        quote: `<svg style="width: 12px; height: 12px" viewBox="0 0 30 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M5.6 0H8.4C9.88521 0 11.3096 0.589998 12.3598 1.6402C13.41 2.69041 14 4.11479 14 5.6V25L9 14H5.6C4.11479 14 2.69041 13.41 1.6402 12.3598C0.589998 11.3096 0 9.88521 0 8.4V5.6C0 4.11479 0.589998 2.69041 1.6402 1.6402C2.69041 0.589998 4.11479 0 5.6 0Z" fill="black"/>
                  <path d="M21.6 0H24.4C25.8852 0 27.3096 0.589998 28.3598 1.6402C29.41 2.69041 30 4.11479 30 5.6V25L25 14H21.6C20.1148 14 18.6904 13.41 17.6402 12.3598C16.59 11.3096 16 9.88521 16 8.4V5.6C16 4.11479 16.59 2.69041 17.6402 1.6402C18.6904 0.589998 20.1148 0 21.6 0Z" fill="black"/>
                </svg>`,
        //повторить отправку
        resend: `<svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.983 5.25899V5.22861H11.9983C11.9935 5.19506 11.9884 5.1616 11.983 5.12823V1.46165L10.9135 2.53371C9.81216 0.998658 8.02127 0 5.99915 0C2.9495 0 0.425794 2.27143 0 5.22861H1.88062C2.28465 3.29082 3.98623 1.85294 5.99915 1.85294C7.50374 1.85294 8.83438 2.6563 9.57922 3.87129L8.19489 5.259L11.983 5.25899Z" fill="#779733"/>
                  <path d="M0.000460625 10.5688L1.09365 9.47294C2.19533 11.0052 3.98455 12.0017 6.0045 12.0017C9.05411 12.0017 11.5778 9.73033 12.0036 6.77319H10.123C9.71894 8.71093 8.01739 10.1488 6.0045 10.1488C4.50209 10.1488 3.17311 9.34773 2.42766 8.13568L3.78856 6.77145L0.000459671 6.77146L0.000460625 10.5688Z" fill="#779733"/>
                </svg>`,
        //удалить
        delete: `<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0.363998 1.9788C0.10069 1.71037 0.103828 1.27782 0.370994 1.01337L1.19969 0.194122C1.46495 -0.067667 1.89035 -0.0643447 2.15121 0.202095L5.00837 3.12296L7.87475 0.205417C8.13771 -0.0623515 8.56616 -0.0630159 8.83023 0.203424L9.63398 1.0147C9.89608 1.27915 9.89744 1.70771 9.63702 1.97349L6.76056 4.91362L9.80557 8.02651C10.066 8.29229 10.0646 8.72085 9.80253 8.9853L8.99879 9.79658C8.7347 10.063 8.30626 10.0624 8.0433 9.79458L5.00801 6.70561L1.98266 9.7979C1.7218 10.0643 1.2964 10.0677 1.03114 9.80588L0.202444 8.98663C-0.0647223 8.72218 -0.06786 8.28963 0.195448 8.0212L3.24817 4.91429L0.363998 1.9788Z" fill="#779733"/>
                </svg>`
      };

      return icons[type];
    },
    getActionTitle(type) {
      const title = { 
        forward: 'Переслать',
        // consider: 'Прочитать',
        // unconsider: 'Отметить непрочитанным',
        unread: 'Пометить далее как непрочитанное',
        open: 'Открыть',
        print: 'Печать',
        download: 'Скачать',
        email: 'Отправить письмом',
        reply: 'Ответить',
        quote: 'Цитировать',
        resend: 'Повторить отправку',
        delete: 'Удалить'
      };

      return title[type];
    },
    reply() {
      const isExistsType = findType(formData.types, this.statusType);

      if (!isExistsType) { alert('Данный способ связи более недоступен для представителя'); return; }

      // EventBus.$emit('message:reply', {
      //   'author': this.author,
      //   'type': this.statusType,
      //   'theme': this.theme,
      //   'text': types[this.statusType],
      //   'authorId': this.authorId,
      //   'accountId': this.accountId,
      //   'isQuote': false
      // });

      EventBus.$emit('message:reply', {
        'id': this.id,
        'table': this.table,
        'text': types[this.statusType],
        'content': this.content,
        'title': this.getQuoteTitle + ' ' + this.getDate(),
        'date': this.date,
        'author': this.author,
        'type': this.statusType,
        'way': this.way,
        'authorId': this.authorId,
        'accountId': this.accountId,
        'isQuote': true
      });
    },
    setQuote() {

      EventBus.$emit('message:reply', {
        'id': this.id,
        'table': this.table,
        'text': types[this.statusType],
        'content': this.content,
        'title': this.getQuoteTitle + ' ' + this.getDate(),
        'date': this.date,
        'author': this.author,
        'type': this.statusType,
        'way': this.way,
        'authorId': this.authorId,
        'accountId': this.accountId,
        'isQuote': true
      });
    }
  }
}
</script>

<style lang="scss">

  .actions {
    display: flex;
    // flex-direction: column;
    flex-wrap: wrap;

    max-width: 72px;

    align-content: flex-start;
    align-items: flex-start;

    list-style: none;

    .actions__item, .actions__btn {
      cursor: pointer;
    }

    &--task {
      position: absolute;
      top: 8px;
      right: 8px;

      .actions__item {
        background: transparent;
        cursor: pointer;

        svg {
          path {
            fill: #aaa;
          }
        }
      }
    }

    &--in {
      // margin-left: auto;
      // margin-right: 0;

      margin-left: 4px;
      margin-right: auto;

      .actions__item {
        background: #F0F0F0;

        svg {
          path {
            fill: #919191;
          }
        }
      }
    }

    &--out {
      // margin-left: 0;
      // margin-right: auto;

      margin-right: 4px;
      margin-left: auto;

      order: -1;

      .actions__item {
        background: #DAF2A9;

        svg {
          path {
            fill: #779733;
          }
        }
      }
    }

    &__item {
      margin-right: 1px;
      margin-left: 1px;
      margin-bottom: 2px;

      opacity: 0;
      transition: .2s;

      border-radius: 6px;
    }

    &__btn {
      display: flex;
      align-items: center;
      justify-content: center;

      height: 22px;
      width: 22px;

      border-radius: 6px;

      background: transparent;
      border: none;

      text-decoration: none;
    }

    // &--new {
    //   position: relative;
    //   &:before {
    //     content: '';
    //     position: absolute;

    //     top: calc(50% - 10px);
    //     right: -15px;

    //     width: 10px;
    //     height: 10px;

    //     border-radius: 10px;

    //     background: #76AE00;
    //   }
    // }
  }

</style>
